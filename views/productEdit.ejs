<!DOCTYPE html>
<html lang="es">
<%- include('./partials/head',{title: "Editar producto" }) %>

    <body class="register">
        <%- include('./partials/header') %>
            <main>
                <div class="row">
                    <div class="col-12 col-md-8 mx-auto mt-3">
                        <div class="card shadow">
                            <div class="card-header">
                                <h4>EDICIÃ“N DE PRODUCTO</h4>
                            </div>
                            <div class="card-body">

                                <form class="row" action="/products/update/<%= id %>?_method=PUT" method="POST" enctype="multipart/form-data"
                                    novalidate>
                                    <div class="col-12 mb-3 ">
                                        <input placeholder="Nombre" type="text" name="name" id="name"
                                            class="form-control <%= locals.errors && errors.name ? 'is-invalid' : null%> " value="<%= locals.old && old.name ? old.name : name %>">
                                            <small class="text-danger ms-2"><%= locals.errors && errors.name ? errors.name.msg : null%></small>
                                    </div>
                                    <div class="col-12 col-md-6 mb-3">
                                        <select name="category" id="category" class="form-select <%= (locals.errors && errors.category) && 'is-invalid'%>" required>
                                            <% categories.forEach(item=> { %>
                                                <option value="<%= item %>" <%= (locals.old && old.category && old.category === item) ? 'selected' : !locals.old && item === category ? 'selected' : null%> >
                                                    <%= item %>
                                                </option>
                                                <% }) %>
                                        </select>
                                        <small class="text-danger ms-2"><%= locals.errors && errors.category ? errors.category.msg : null%></small>

                                    </div>
                                    <div class="col-12 col-md-6 mb-3">
                                        <select name="brand" id="brand" class="form-select <%= (locals.errors && errors.brand) && 'is-invalid'%>">
                                            <% brands.forEach(item=> { %>
                                                <option value="<%= item %>"  <%= (locals.old && old.brand && old.brand === item) ? 'selected' : !locals.old && item === brand ? 'selected' : null%>>
                                                    <%= item %>
                                                </option>
                                                <% }) %>
                                        </select>

                                    </div>
                                    <div class="col-12 mb-3">

                                        <textarea placeholder="Descripcion" name="description" id="description"
                                            cols="30" rows="3" class="form-control <%= (locals.errors && errors.description) && 'is-invalid'%>"
                                            style="resize: none;"><%= locals.old && old.description ? old.description : description %></textarea>
                                            <small class="text-danger ms-2"><%= locals.errors && errors.description? errors.description.msg : null%></small>

                                    </div>

                                    <div class="col-12 col-md-6 mb-3">
                                        <input placeholder="Precio" type="number" name="price" id="price" value="<%= locals.old && old.price ? old.price : price %>"
                                            class="form-control <%= (locals.errors && errors.price) && 'is-invalid'%>">
                                            <small class="text-danger ms-2"><%= locals.errors && errors.price? errors.price.msg : null%></small>

                                    </div>


                                    <div class="col-12 col-md-6 mb-3">
                                        <input placeholder="Descuento" type="number" name="discount" id="discount" value="<%= locals.old && old.discount ? old.discount : discount %>"
                                            class="form-control <%= (locals.errors && errors.discount) && 'is-invalid'%>">
                                            <small class="text-danger ms-2"><%= locals.errors && errors.discount? errors.discount.msg : null%></small>
                                    </div>

                                    <div class="col-12 col-md-6 mb-3 ">
                                        <input type="file" name="image" id="image" accept="image/*"
                                            class="form-control  <%= (locals.errors && errors.image) && 'is-invalid'%>">
                                            <small class="text-danger ms-2"><%= locals.errors && errors.image? errors.image.msg : null%></small>

                                    </div>

                                    <div class="col-12 col-md-6 mb-3">
                                        <button class="btn btn-dark w-100" type="submit">Actualizar</button>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>

            </main>
            <%- include('./partials/footer') %>

    </body>

</html>